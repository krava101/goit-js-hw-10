{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst dateInput = document.querySelector(\"#datetime-picker\");\nconst startBtn = document.querySelector(\"button[data-start]\");\nconst daysLeft = document.querySelector(\"span[data-days]\");\nconst hoursLeft = document.querySelector(\"span[data-hours]\");\nconst minsLeft = document.querySelector(\"span[data-minutes]\");\nconst secsLeft = document.querySelector(\"span[data-seconds]\");\n\niziToast.settings({ \n\ttitle: 'Error',\n\ttitleColor: '#fff',\n\ttitleSize: '16px',\n\ttitleLineHeight: '1.5',\n\tmessage: 'Please choose a date in the future',\n\tmessageColor: '#fff',\n\tmessageSize: '16px',\n\tmessageLineHeight: '1.5',\n\tbackgroundColor: '#EF4040',\n\tballoon: false,\n\tclose: true,\n\tcloseOnEscape: true,\n\tposition: 'topRight',\n\ttimeout: 5000,\n\tanimateInside: false,\n\tprogressBarColor: '#B51B1B',\n});\n\nlet userSelectedDate = 0;\nconst addLeadingZero = value => String(value).padStart(2, '0');\n\nfunction outputTimer(days, hours, minutes, seconds) {\n\tdaysLeft.textContent = addLeadingZero(days);\n\thoursLeft.textContent = addLeadingZero(hours);\n\tminsLeft.textContent = addLeadingZero(minutes);\n\tsecsLeft.textContent = addLeadingZero(seconds);\n}\n\nfunction convertMs(ms){\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n\toutputTimer(days, hours, minutes, seconds);\n}\n\n\nconst startBtnClick = () => {\n\tconst intervalId = setInterval(() => {\n\t\tconst timeInterval = userSelectedDate - Date.now();\n\t\tif (timeInterval < 1000) {\n\t\t\tclearInterval(intervalId);\n\t\t\tdateInput.disabled = false;\n\t\t}\n\t\tconvertMs(timeInterval);\n\t}, 1000);\n\tstartBtn.removeEventListener(\"click\", startBtnClick);\n\tstartBtn.disabled = true;\n\tdateInput.disabled = true;\n}\n\n\nfunction toStartTimer() {\n  const currentDate = Date.now();\n\tconst timeInterval = userSelectedDate - currentDate;\n  if (timeInterval < 0) {\n\t\tstartBtn.disabled = true;\n\t\tiziToast.error()\n\t} else {\n\t\tstartBtn.disabled = false;\n\t\tstartBtn.addEventListener(\"click\", startBtnClick)\n\t}\n}\n\n\nconst calendar = flatpickr(dateInput, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates){\n    userSelectedDate = selectedDates[0];\n    toStartTimer();\n  }\n});\n"],"names":["dateInput","startBtn","daysLeft","hoursLeft","minsLeft","secsLeft","iziToast","userSelectedDate","addLeadingZero","value","outputTimer","days","hours","minutes","seconds","convertMs","ms","startBtnClick","intervalId","timeInterval","toStartTimer","currentDate","flatpickr","selectedDates"],"mappings":"+IAMA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,oBAAoB,EAE5DC,EAAS,SAAS,CACjB,MAAO,QACP,WAAY,OACZ,UAAW,OACX,gBAAiB,MACjB,QAAS,qCACT,aAAc,OACd,YAAa,OACb,kBAAmB,MACnB,gBAAiB,UACjB,QAAS,GACT,MAAO,GACP,cAAe,GACf,SAAU,WACV,QAAS,IACT,cAAe,GACf,iBAAkB,SACnB,CAAC,EAED,IAAIC,EAAmB,EACvB,MAAMC,EAAiBC,GAAS,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAE7D,SAASC,EAAYC,EAAMC,EAAOC,EAASC,EAAS,CACnDZ,EAAS,YAAcM,EAAeG,CAAI,EAC1CR,EAAU,YAAcK,EAAeI,CAAK,EAC5CR,EAAS,YAAcI,EAAeK,CAAO,EAC7CR,EAAS,YAAcG,EAAeM,CAAO,CAC9C,CAEA,SAASC,EAAUC,EAAG,CAMpB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAEnEN,EAAYC,EAAMC,EAAOC,EAASC,CAAO,CAC1C,CAGA,MAAMG,EAAgB,IAAM,CAC3B,MAAMC,EAAa,YAAY,IAAM,CACpC,MAAMC,EAAeZ,EAAmB,KAAK,IAAG,EAC5CY,EAAe,MAClB,cAAcD,CAAU,EACxBlB,EAAU,SAAW,IAEtBe,EAAUI,CAAY,CACtB,EAAE,GAAI,EACPlB,EAAS,oBAAoB,QAASgB,CAAa,EACnDhB,EAAS,SAAW,GACpBD,EAAU,SAAW,EACtB,EAGA,SAASoB,GAAe,CACtB,MAAMC,EAAc,KAAK,MACLd,EAAmBc,EACpB,GACnBpB,EAAS,SAAW,GACpBK,EAAS,MAAO,IAEhBL,EAAS,SAAW,GACpBA,EAAS,iBAAiB,QAASgB,CAAa,EAElD,CAGiBK,EAAUtB,EAAW,CACpC,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQuB,EAAc,CACpBhB,EAAmBgB,EAAc,GACjCH,GACD,CACH,CAAC"}